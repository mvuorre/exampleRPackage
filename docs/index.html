<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Example R Package • exampleRPackage</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Example R Package">
<meta name="description" content="An example R package with good practices.">
<meta property="og:description" content="An example R package with good practices.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">exampleRPackage</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/Example-article.html">Example article</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="http://github.com/mvuorre/exampleRPackage/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="examplerpackage">exampleRPackage<a class="anchor" aria-label="anchor" href="#examplerpackage"></a>
</h1></div>
<p>exampleRPackage shows how R packages can be used to store and communicate scientific research products and metadata. Browse its <a href="https://github.com/mvuorre/exampleRPackage" class="external-link">source code</a>, or read this document for a tutorial on creating R packages.</p>
<p>Note: This aims to be a concise example and introduction, consult <strong><a href="https://r-pkgs.org/" class="external-link uri">https://r-pkgs.org/</a></strong> for the definitive guide on R package development.</p>
</div>
<div class="section level1">
<h1 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h1>
<p>Research projects produce experiments, data, analyses, manuscripts, posters, slides, stimuli and materials, computational models, and more. However, the potential added value of these products is not fully realized due to limited sharing and curating practices. Although more transparent communication of these research products has recently been encouraged (Houtkoop et al. 2018; Lindsay 2017; Vanpaemel et al. 2015; Wicherts et al. 2006; Klein et al. 2018; Martone, Garcia-Castro, and VandenBos 2018; Rouder, Haaf, and Snyder 2019; Rouder 2016), these efforts often focus narrowly on sharing data (and sometimes analysis code). Further, the practical value of sharing is often limited by poor documentation, incompatible file formats, and lack of organization, resulting in low rates of reproducibility (Hardwicke et al. 2018). Standardization of protocols for sharing would be beneficial; but, such standards have not yet emerged. Instead of developing another standard, we suggest borrowing existing standards and practices from software engineering. Specifically, the R package standard, with additional R authoring tools, provides a robust framework for organizing and sharing reproducible research products.</p>
<p>Some advances in data-sharing standards have emerged: In much of psychological science it is now customary to share data on Open Science Framework (OSF). However, those materials often contain idiosyncratic file organization and minimal or missing documentation for raw data. In specific areas, organization and documentation standards have emerged, (e.g., the BIDS framework in neuroscience, Gorgolewski et al. 2016), but they usually only consider data and code instead of the project as a whole. More comprehensive proposals are described in the Transparency and Openness Promotion (Nosek et al. 2015), and Peer Reviewers’ Openness initiative guidelines (Morey et al. 2016), but these fall short of describing detailed standards for organization and metadata.</p>
<p>We sought for a standard for organizing and sharing that would adhere to the FAIR (Findable, Accessible, Interoperable, Reusable) guidelines to maximize the reuse potential of data and support “discovery through good data management” (Wilkinson et al. 2016). Additionally, we recognized the added value of including other research outputs (“products”; e.g., manuscripts) beyond datasets in a reproducible collection of materials that is openly available on the internet for transparency and ease of access. We identified the R package standard with modern online-based workflows as a solution that doesn’t present overwhelming overhead for already busy researchers. Here, we present a tutorial on creating R packages for sharing research products, such as data, functions, and analysis code embedded in narrative documents.</p>
</div>
<div class="section level1">
<h1 id="r-package-tutorial">R Package tutorial<a class="anchor" aria-label="anchor" href="#r-package-tutorial"></a>
</h1>
<p>The outline of this tutorial is as follows:</p>
<ol style="list-style-type: decimal">
<li>Create a new R package with R Studio
<ul>
<li>Set up the fundamental package infrastructure</li>
</ul>
</li>
<li>Describe the package
<ul>
<li>Edit DESCRIPTION and readme files</li>
</ul>
</li>
<li>Add data to package
<ul>
<li>Add raw data, preprocessing scripts, and an R data object</li>
</ul>
</li>
<li>Create and add functions
<ul>
<li>Create and document functions</li>
<li>Dependencies</li>
</ul>
</li>
<li>Document the package
<ul>
<li>Describe the package, its functions, and data, in a machine- and human-readable format</li>
</ul>
</li>
</ol>
<p>After these steps, you will have a functional R package on your computer. Then, we will talk about sharing and showcasing your package online.</p>
<ul>
<li>Sharing the package
<ul>
<li>Upload to GitHub to make your package (and its source code) available</li>
<li>Connect to Open Science Framework</li>
</ul>
</li>
<li>Create a website for the package
<ul>
<li>Showcase your R package online with a website</li>
</ul>
</li>
<li>Add narrative documents
<ul>
<li>Describe how to use your data and functions (e.g. manuscripts, supplementary analysis files)</li>
</ul>
</li>
</ul>
<div class="section level2">
<h2 id="create-a-package-with-r-studio">Create a package with R Studio<a class="anchor" aria-label="anchor" href="#create-a-package-with-r-studio"></a>
</h2>
<p>First, use R Studio to create a new R Project. Click “File” -&gt; “New Project…” -&gt; “New Directory” -&gt; “R Package”. This brings up a menu where you give your package a name, and specify where to create it on your hard drive. To enable Git (Vuorre and Curley 2018), make sure that the “Create a git repository” box is checked (see below). In this tutorial, we create an R package called exampleRPackage; if you want to follow the tutorial exactly, choose that name for your package.</p>
<p>After you click “Create project”, the project’s files and folders look like this:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="bu">.</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">├──</span> .gitignore</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="ex">├──</span> .Rbuildignore</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="ex">├──</span> DESCRIPTION</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="ex">├──</span> NAMESPACE</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="ex">├──</span> R</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="ex">│</span>   └── hello.R</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="ex">├──</span> exampleRPackage.Rproj</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="ex">└──</span> man</span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>    <span class="ex">└──</span> hello.Rd</span></code></pre></div>
<p><code>.gitignore</code> and <code>.Rbuildignore</code> are hidden files, and specify which files should be ignored by Git (Vuorre and Curley 2018), and R package building operations, respectively. You can ignore them for now. <code>DESCRIPTION</code> is a file describing the package, and <code>NAMESPACE</code> its functions. <code>R/</code> is the folder for scripts that contain R functions. <code>exampleRPackage.Rproj</code> identifies the folder as an R package project. <code>man/</code> is the “manuals” folder which will have files documenting the package’s functions.</p>
<p>The package is already functional, but it contains nothing useful: Next, we introduce and edit the content to create a complete package that contains data and functions.</p>
</div>
<div class="section level2">
<h2 id="describe-the-package">Describe the package<a class="anchor" aria-label="anchor" href="#describe-the-package"></a>
</h2>
<p>The <code>DESCRIPTION</code> file describes the package in a standard, machine-readable format. This file is automatically created with example content by R Studio. However, you need to edit the file to reflect the details of your package, making sure you don’t change the formatting: This file is read by the R package creating process, and the file must therefore remain machine-readable. Here’s an example:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">Package:</span> exampleRPackage</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="ex">Type:</span> Package</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="ex">Title:</span> An example R package</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="ex">Version:</span> 0.1.0</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="ex">Authors@R:</span> person<span class="er">(</span><span class="st">"Matti"</span><span class="ex">,</span> <span class="st">"Vuorre"</span>, email = <span class="st">"mv2521@columbia.edu"</span>,</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>                  <span class="ex">role</span> = c<span class="er">(</span><span class="st">"aut"</span><span class="ex">,</span> <span class="st">"cre"</span><span class="kw">))</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="ex">Description:</span> This package is an example R package.</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="ex">Encoding:</span> UTF-8</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="ex">LazyData:</span> true</span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="ex">Depends:</span> </span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a>    <span class="ex">R</span> <span class="er">(</span><span class="op">&gt;</span>= <span class="ex">3.1</span><span class="kw">)</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="ex">Imports:</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a>    <span class="ex">stringr</span></span></code></pre></div>
<p>This file serves two important purposes. First, it describes your package (<code>Title</code>, <code>Version</code> number, <code>Authors</code>, and <code>Description</code>). The <code>Authors@R</code> field contains person information in R syntax (see <code><a href="https://rdrr.io/r/utils/person.html" class="external-link">?person</a></code>), and can include multiple persons by wrapping them in <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code>. (<code>Encoding</code> and <code>Lazydata</code> field can be ignored, for our purposes.) Second, it specifies your package’s dependencies (<code>Depends</code>, <code>Imports</code>, and <code>Suggests</code> [the latter is not included in this example]).</p>
<p>There are important differences between the three fields for specifying your package’s dependencies. First, you should rarely, if ever, use <code>Depends</code>, except for specifying a version of R that your package requires. <code>Imports</code> is the most common field for listing the R packages that your package requires: Packages listed in <code>Imports</code> are installed when your package is installed. When you write functions (see below) in your package, you can use the other package’s functions with the <code>::</code> operator (e.g. <code>stringr::to_title_case()</code>).</p>
<p>For more information about DESCRIPTION, and describing your package, see <a href="http://r-pkgs.had.co.nz/description.html" class="external-link uri">http://r-pkgs.had.co.nz/description.html</a>.</p>
<div class="section level3">
<h3 id="readme">Readme<a class="anchor" aria-label="anchor" href="#readme"></a>
</h3>
<p>Although not part of the R package standard, we recommend creating a readme file that gives additional narrative description about your package. We recommend writing the file in Markdown or R Markdown (Allaire et al. 2016). To create the R Markdown file, use the following function from the usethis package:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://usethis.r-lib.org" class="external-link">usethis</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_readme_rmd.html" class="external-link">use_readme_rmd</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This function created the file, and also printed a message indicating that the file has been added to the “.Rbuildignore” file. Make changes to <code>README.Rmd</code> with R Studio’s text editor. When you are done, click Knit in R Studio, which produces a Markdown file that displays nicely when the package is hosted online (see below). (If your README.Rmd uses your package, you cannot Knit it before clicking “Install and Restart” in R Studio’s build tab.)</p>
<p>Now that we have described the package, let’s add some data to it.</p>
</div>
</div>
<div class="section level2">
<h2 id="add-data">Add data<a class="anchor" aria-label="anchor" href="#add-data"></a>
</h2>
<p>The purposes of saving data in an R package are that the resulting data will be easily available, and described and organized in a standard, machine-readable format. Further, if your package’s source code is under version control (Vuorre and Curley 2018), the data will be versioned as well.</p>
<p>Broadly, there are 3 steps to including data in an R package: 1. Placing raw data in the “data-raw” directory, 2. creating an R script that processes the raw data and creates an R data object into the “data” directory, and 3. documenting the final data object.</p>
<p>First, we will add the raw data to a <code>data-raw/</code> directory. We use a convenience function from the usethis package to create that folder, which will also add the folder into the <code>.Rbuildignore</code> file, ensuring that the R package build process will ignore it.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_data.html" class="external-link">use_data_raw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Then, I moved an example data file (a small simulated dataset) to the “data-raw” directory, and created a <a href="https://github.com/mvuorre/exampleRPackage/blob/master/data-raw/preprocess.R" class="external-link">“preprocess.R”</a> file in the same directory. Usually, that file would contain the code for pre-processing the data, but for this example that is not needed. That example preprocessing file simply reads in the data file, and runs the following command:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_data.html" class="external-link">use_data</a></span><span class="op">(</span><span class="va">exampleData</span><span class="op">)</span></span></code></pre></div>
<p>The above command takes the <code>exampleData</code> object from the R environment (created in the <a href="https://github.com/mvuorre/exampleRPackage/blob/master/data-raw/preprocess.R" class="external-link">script</a>) and saves the R data object into <code>data/</code>. As a result, your R package now includes a data set called <code>exampleData</code>.</p>
<p>Finally, the resulting R data object should be documented in a standard format by placing a <code>data.R</code> file in the “R” directory. To document your data set, create a file called <code>data.R</code> in the <code>R</code> directory. Then, use <a href="https://roxygen2.r-lib.org/" class="external-link">roxygen2</a> (Wickham, Danenberg, and Eugster 2017) documentation syntax to write your data object’s documentation in the <code>R/data.R</code> file. It should look similar to the following for our <code>exampleData</code> object:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co">#' @title Scores of Group A and Group B</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="co">#' @description A data set with the scores of two groups.</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="co">#' @format A data frame with 60 rows and 2 variables:</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="co">#' \describe{</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="co">#'   \item{group}{Participant's group, A or B.}</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="co">#'   \item{score}{The participant's score in hypothetical task.}</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="co">#' }</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="co">#' @source &lt;https://www.github.com/mvuorre/exampleRPackage&gt;</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="st">"exampleData"</span></span></code></pre></div>
<p>The key features of this documentation file are (from top to bottom in the above code listing):</p>
<p>Each line begins with a <code>#'</code> to indicate roxygen2 syntax. First, your data set should have a title (<code>@title</code>). The <code>@description</code> field is an optional but highly recommended longer description of the data. For example, what were the collection procedures, who were the respondents, etc. The <code>@format</code> field describes the object (e.g. an R data.frame), its dimensions, and then describes all the variables (e.g. <code>group</code> and <code>score</code>). The <code>@source</code> field includes the source of the data, which could be a citation to an academic article, or a website, for example. Finally, the last line should be the name of the data object in quotation marks. You can document multiple data files in the same <code>R/data.R</code> file; simply leave one blank line between them.</p>
<p>For more details on creating, documenting, and including data sets in R packages, see <a href="http://r-pkgs.had.co.nz/data.html" class="external-link uri">http://r-pkgs.had.co.nz/data.html</a>.</p>
</div>
<div class="section level2">
<h2 id="create-functions">Create functions<a class="anchor" aria-label="anchor" href="#create-functions"></a>
</h2>
<p>Functions in R packages are portable, such that others can install the package from their R console, load it, and start using the functions immediately. Packages can also depend on other packages (and be depended on), such that R automatically installs any requirements for your functions to work appropriately. Functions within R packages are documented in a standardized manner, and the documentation for a function can be viewed in R (e.g. try <code><a href="https://rdrr.io/r/base/mean.html" class="external-link">?mean</a></code>) or online.</p>
<p>Learning and following R conventions for declaring functions has a pedagogical benefit to the researcher and may improve their practices. There is also a reuse benefit: Functions can be difficult to find in old scripts, but easy to find and load if they are called from an existing package. Thus, formally including one’s functions in R packages facilitates reproducibility and sharing.</p>
<p>To include functions in your package, place the functions’ scripts in files in the “R” directory. When you first created your package, that directory was created with an example <code>hello.R</code> script. Open that file in R Studio’s text editor, and delete all the text above the function. Then, in the R Studio menu, click “Code” -&gt; “Insert Roxygen Skeleton”. That creates template documentation into the function’s file, which you can then manually fill to describe your function. <code>exampleRPackage</code> includes an example function, whose source looks like this:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co">#' Personal greeting</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="co">#' @description Greet a person and appropriately capitalize their name.</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="co">#' @param name Your name (character string; e.g. "john doe").</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="co">#' @return A character string, capitalized to title case.</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="co">#' @export</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="co">#' @examples</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="co">#' hello("james bond")</span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>hello <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">name =</span> <span class="st">"your name"</span>) {</span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>    name <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_to_title</span>(name)</span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Hello,"</span>, name))</span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a>}</span></code></pre></div>
<p>This function, as was the data set above, is documented with <a href="https://roxygen2.r-lib.org/index.html" class="external-link">roxygen2</a> syntax. Many of the fields are similar from the above section on data documentation. Here, we also have <code>@param</code> fields, these describe what the function’s arguments are. The <code>@return</code> field describes what the function will return. <code>@export</code> indicates that the function should be exported from your package; that is, made available when you attach the package with <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code>. There is also an <code>@examples</code> field that can include executable examples of how to use your function. Below the function’s description is the actual code.</p>
<p>For more information on writing functions in R packages, see <a href="http://r-pkgs.had.co.nz/r.html" class="external-link uri">http://r-pkgs.had.co.nz/r.html</a>.</p>
</div>
<div class="section level2">
<h2 id="finish-documentation-and-build-package">Finish documentation and build package<a class="anchor" aria-label="anchor" href="#finish-documentation-and-build-package"></a>
</h2>
<p>We are almost ready with the minimal example package. The only remaining steps are to finish documenting the package, and then to build and install it on your computer.</p>
<p>Your package is now documented in the DESCRIPTION file, and the functions and data are documented in their respective files in the R/ directory. The data and functions were documented with <a href="https://roxygen2.r-lib.org/" class="external-link">roxygen2</a> syntax, which must subsequently be translated into R’s documentation files in the man/ directory, and their dependencies must be listed in the NAMESPACE file.</p>
<p>Fortunately, you don’t need to do that manually. First, ensure that R Studio generates documentation with roxygen. Go to Tools -&gt; Project Options… -&gt; Build Tools, and ensure that “Generate documentation with roxygen” is checked, and that “Automatically run roxygen when running install and restart” is checked in the subsequent “Configure” menu. Then, delete the two files, man/hello.Rd and NAMESPACE, which R Studio created automatically when you started your package. Finally, in R Studio’s “Build” tab, click “Install and Restart”.</p>
<p>Doing so automatically writes the documentation in man/, and the appropriate dependencies and your package’s exported functions into the NAMESPACE file, which you subsequently never need to (or should) edit manually. After this, whenever you have edited your documentation, clicking “Install and Restart” will update the documentation files. To read more about documenting your data and functions, please visit <a href="http://r-pkgs.had.co.nz/man.html" class="external-link uri">http://r-pkgs.had.co.nz/man.html</a>.</p>
<p>Having clicked “Install and Restart” you have also, rather obviously, installed your package and restarted R. If, following this tutorial, you created the <code><a href="reference/hello.html">hello()</a></code> function and <code>exampleData</code> data sets, they are now available to you when the package is attached:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mvuorre/exampleRPackage/" class="external-link">exampleRPackage</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/hello.html">hello</a></span><span class="op">(</span><span class="st">"my name"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Hello, My Name"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">exampleData</span><span class="op">)</span></span>
<span><span class="co">#&gt;   group     score</span></span>
<span><span class="co">#&gt; 1     a  97.18260</span></span>
<span><span class="co">#&gt; 2     a  86.87440</span></span>
<span><span class="co">#&gt; 3     a 107.95184</span></span>
<span><span class="co">#&gt; 4     a 102.70070</span></span>
<span><span class="co">#&gt; 5     a  97.22694</span></span>
<span><span class="co">#&gt; 6     a  94.33976</span></span></code></pre></div>
<p>And you can view their help pages by prepending their names with a question mark:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">hello</span></span>
<span><span class="op">?</span><span class="va">exampleData</span></span></code></pre></div>
</div>
</div>
<div class="section level1">
<h1 id="advanced-optional-steps">Advanced (optional) steps<a class="anchor" aria-label="anchor" href="#advanced-optional-steps"></a>
</h1>
<div class="section level2">
<h2 id="sharing-the-r-package">Sharing the R package<a class="anchor" aria-label="anchor" href="#sharing-the-r-package"></a>
</h2>
<div class="section level3">
<h3 id="github">GitHub<a class="anchor" aria-label="anchor" href="#github"></a>
</h3>
<p>The easiest way to share the package is to create the R package as a Git repository and share it on GitHub (Vuorre and Curley (2018); <a href="https://happygitwithr.com/" class="external-link uri">https://happygitwithr.com/</a>; <a href="http://r-pkgs.had.co.nz/git.html" class="external-link uri">http://r-pkgs.had.co.nz/git.html</a>). If you followed the tutorial above, Git is already initialized in the package’s repository. After connecting the local Git repository to GitHub, you can use R Studio’s Git panel to stage, commit, push, and pull changes. Once the package’s source code is pushed to GitHub, others can install the package. For example, you can install the example package created in this tutorial:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"mvuorre/exampleRPackage"</span><span class="op">)</span></span></code></pre></div>
<p>The above command, when executed in R, downloads and installs the <code>exampleRPackage</code> from GitHub user <code>mvuorre</code>. You can view this example R package’s source code on GitHub: <a href="https://github.com/mvuorre/exampleRPackage" class="external-link uri">https://github.com/mvuorre/exampleRPackage</a>.</p>
</div>
<div class="section level3">
<h3 id="open-science-framework">Open Science Framework<a class="anchor" aria-label="anchor" href="#open-science-framework"></a>
</h3>
<p>If you have connected the package’s GitHub repository to an OSF project, you can also install the package from OSF, as done below for this example package:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">temporary_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".tar.gz"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">download.file</a></span><span class="op">(</span><span class="st">"https://osf.io/mqd6f/download"</span>, destfile <span class="op">=</span> <span class="va">temporary_file</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="va">temporary_file</span>, repos <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="creating-a-website-for-the-r-package">Creating a website for the R package<a class="anchor" aria-label="anchor" href="#creating-a-website-for-the-r-package"></a>
</h2>
<p>Once the package’s source code is hosted on GitHub, you can showcase its contents as a website. For example, you can view exampleRPackage’s website at <a href="https://mvuorre.github.io/exampleRPackage/" class="external-link uri">https://mvuorre.github.io/exampleRPackage/</a>. To create websites from your packages, you need the <a href="https://pkgdown.r-lib.org" class="external-link">pkgdown</a> R package (Wickham 2017). After installing that package, set up the required files for the website:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_pkgdown.html" class="external-link">use_pkgdown</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Then, To create the website, run:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://pkgdown.r-lib.org/reference/build_site.html" class="external-link">build_site</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The website is now available at <code>docs/index.html</code>. You can open it and view it locally. However, you will certainly want to upload the website somewhere so that others can access it as well. The easiest option is to host it on GitHub.</p>
<p>Here, we assume that you have created the package in a local Git repository and have pushed the repository to GitHub. Push all the current changes to GitHub, and then go to the package’s GitHub website, click “Settings”, and scroll down to “GitHub Pages”. There, click on the “Source” pull-down menu that currently says “None”, and choose the “master branch /docs folder”. Save the changes. After a little while, the page will be visible at <a href="https://username.github.io/packagename" class="external-link uri">https://username.github.io/packagename</a>. For example, <code>exampleRPackage</code>’s website is at <a href="https://mvuorre.github.io/exampleRPackage" class="external-link uri">https://mvuorre.github.io/exampleRPackage</a>.</p>
<p>There are many options for customizing the website; see <a href="https://pkgdown.r-lib.org" class="external-link uri">https://pkgdown.r-lib.org</a>.</p>
</div>
<div class="section level2">
<h2 id="other-content">Other content<a class="anchor" aria-label="anchor" href="#other-content"></a>
</h2>
<p>Up to this point, our package has contained only code and data. However, typical research products make use of those to create narrative documents. R packages can contain vignettes, which show example uses of the package’s data and functions, and are distributed with the package. However, many more kinds of narrative documents can be shared along the R package’s source code, and included on the website, such as manuscript PDFs created with R Markdown.</p>
<p>Here, we create an article that shows an example analysis of the dataset contained in our exampleRPackage. When completed, the document will render as a subpage of the package’s website (see above).</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_vignette.html" class="external-link">use_article</a></span><span class="op">(</span><span class="st">"Example-Analysis"</span><span class="op">)</span></span></code></pre></div>
<p>Then, after editing the contents of that file, re-run <code><a href="https://pkgdown.r-lib.org/reference/build_site.html" class="external-link">build_site()</a></code>, and the document will be rendered as a webpage on the package’s website.</p>
<p>The content we just added resulted in a website, but you could also include PDF manuscripts whose source code is R Markdown, or many other kinds of documents. For details, see the <a href="https://hadley.github.io/pkgdown/" class="external-link">pkgdown</a> and <a href="https://rmarkdown.rstudio.com/" class="external-link">R Markdown</a> websites.</p>
</div>
</div>
<div class="section level1">
<h1 id="further-reading">Further Reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h1>
<div class="section level2">
<h2 id="online-resources">Online Resources<a class="anchor" aria-label="anchor" href="#online-resources"></a>
</h2>
<ul>
<li>
<a href="http://r-pkgs.had.co.nz/" class="external-link uri">http://r-pkgs.had.co.nz/</a>: Website of Hadley Wickham’s R Packages book (Wickham 2015).</li>
<li>
<a href="https://hilaryparker.com/2014/04/29/writing-an-r-package-from-scratch/" class="external-link">Writing an R package from scratch</a>: A short and good blog post on how to create minimal R packages</li>
<li>
<a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html" class="external-link">Writing R Extensions</a>: The official R documentation on writing R packages. This is the complete and definitive set of instructions on how to write R packages. It is almost unreadable in it’s comprehensiveness, and unnecessary for small R packages.</li>
<li>
<a href="https://happygitwithr.com/" class="external-link uri">https://happygitwithr.com/</a>: A guide for using Git with R and R Studio</li>
</ul>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-allaire_rmarkdown:_2016" class="csl-entry">
Allaire, J. J., Joe Cheng, Yihui Xie, Jonathan McPherson, Winston Chang, Jeff Allen, Hadley Wickham, and Rob Hyndman. 2016. “Rmarkdown: Dynamic Documents for R.” <a href="https://cran.r-project.org/web/packages/rmarkdown/index.html" class="external-link uri">https://cran.r-project.org/web/packages/rmarkdown/index.html</a>.
</div>
<div id="ref-gorgolewski_brain_2016" class="csl-entry">
Gorgolewski, Krzysztof J., Tibor Auer, Vince D. Calhoun, R. Cameron Craddock, Samir Das, Eugene P. Duff, Guillaume Flandin, et al. 2016. “The Brain Imaging Data Structure, a Format for Organizing and Describing Outputs of Neuroimaging Experiments.” <em>Scientific Data</em> 3 (June): 160044. <a href="https://doi.org/10.1038/sdata.2016.44" class="external-link uri">https://doi.org/10.1038/sdata.2016.44</a>.
</div>
<div id="ref-HardwickeDataavailabilityreusability2018" class="csl-entry">
Hardwicke, Tom E., Maya B. Mathur, Kyle MacDonald, Gustav Nilsonne, George C. Banks, Mallory C. Kidwell, Alicia Hofelich Mohr, et al. 2018. “Data Availability, Reusability, and Analytic Reproducibility: Evaluating the Impact of a Mandatory Open Data Policy at the Journal Cognition.” <em>Royal Society Open Science</em> 5 (8): 180448. <a href="https://doi.org/10.1098/rsos.180448" class="external-link uri">https://doi.org/10.1098/rsos.180448</a>.
</div>
<div id="ref-HoutkoopDataSharingPsychology2018" class="csl-entry">
Houtkoop, Bobby Lee, Chris Chambers, Malcolm Macleod, Dorothy V. M. Bishop, Thomas E. Nichols, and Eric-Jan Wagenmakers. 2018. “Data Sharing in Psychology: A Survey on Barriers and Preconditions.” <em>Advances in Methods and Practices in Psychological Science</em> 1 (1): 70–85. <a href="https://doi.org/10.1177/2515245917751886" class="external-link uri">https://doi.org/10.1177/2515245917751886</a>.
</div>
<div id="ref-KleinPracticalGuideTransparency2018" class="csl-entry">
Klein, Olivier, Tom E. Hardwicke, Frederik Aust, Johannes Breuer, Henrik Danielsson, Alicia Hofelich Mohr, Hans Ijzerman, Gustav Nilsonne, Wolf Vanpaemel, and Michael C. Frank. 2018. “A Practical Guide for Transparency in Psychological Science.” <em>Collabra: Psychology</em> 4 (1): 20. <a href="https://doi.org/10.1525/collabra.158" class="external-link uri">https://doi.org/10.1525/collabra.158</a>.
</div>
<div id="ref-LindsaySharingDataMaterials2017" class="csl-entry">
Lindsay, D. Stephen. 2017. “Sharing Data and Materials in Psychological Science.” <em>Psychological Science</em> 28 (6): 699–702. <a href="https://doi.org/10.1177/0956797617704015" class="external-link uri">https://doi.org/10.1177/0956797617704015</a>.
</div>
<div id="ref-MartoneDatasharingpsychology2018" class="csl-entry">
Martone, Maryann E., Alexander Garcia-Castro, and Gary R. VandenBos. 2018. “Data Sharing in Psychology.” <em>American Psychologist</em> 73 (2): 111–25. <a href="https://doi.org/10.1037/amp0000242" class="external-link uri">https://doi.org/10.1037/amp0000242</a>.
</div>
<div id="ref-morey_peer_2016" class="csl-entry">
Morey, Richard D., Christopher D. Chambers, Peter J. Etchells, Christine R. Harris, Rink Hoekstra, Daniël Lakens, Stephan Lewandowsky, et al. 2016. “The Peer Reviewers Openness Initiative: Incentivizing Open Research Practices Through Peer Review.” <em>Royal Society Open Science</em> 3 (1): 150547. <a href="https://doi.org/10.1098/rsos.150547" class="external-link uri">https://doi.org/10.1098/rsos.150547</a>.
</div>
<div id="ref-nosek_promoting_2015" class="csl-entry">
Nosek, Brian A., G. Alter, G. C. Banks, D. Borsboom, S. D. Bowman, S. J. Breckler, S. Buck, et al. 2015. “Promoting an Open Research Culture.” <em>Science</em> 348 (6242): 1422–25. <a href="https://doi.org/10.1126/science.aab2374" class="external-link uri">https://doi.org/10.1126/science.aab2374</a>.
</div>
<div id="ref-Rouderwhatwhyhow2016" class="csl-entry">
Rouder, Jeffrey N. 2016. “The What, Why, and How of Born-Open Data.” <em>Behavior Research Methods</em> 48 (3): 1062–69. <a href="https://doi.org/10.3758/s13428-015-0630-z" class="external-link uri">https://doi.org/10.3758/s13428-015-0630-z</a>.
</div>
<div id="ref-RouderMinimizingMistakesPsychological2019" class="csl-entry">
Rouder, Jeffrey N., Julia M. Haaf, and Hope K. Snyder. 2019. “Minimizing Mistakes in Psychological Science.” <em>Advances in Methods and Practices in Psychological Science</em> 2 (1): 3–11. <a href="https://doi.org/10.1177/2515245918801915" class="external-link uri">https://doi.org/10.1177/2515245918801915</a>.
</div>
<div id="ref-VanpaemelAreWeWasting2015" class="csl-entry">
Vanpaemel, Wolf, Maarten Vermorgen, Leen Deriemaecker, and Gert Storms. 2015. “Are We Wasting a Good Crisis? The Availability of Psychological Research Data After the Storm.” <em>Collabra: Psychology</em> 1 (1): Art. 3. <a href="https://doi.org/10.1525/collabra.13" class="external-link uri">https://doi.org/10.1525/collabra.13</a>.
</div>
<div id="ref-VuorreCuratingResearchAssets2018" class="csl-entry">
Vuorre, Matti, and James P. Curley. 2018. “Curating Research Assets: A Tutorial on the Git Version Control System.” <em>Advances in Methods and Practices in Psychological Science</em> 1 (2): 219–36. <a href="https://doi.org/10.1177/2515245918754826" class="external-link uri">https://doi.org/10.1177/2515245918754826</a>.
</div>
<div id="ref-Wichertspooravailabilitypsychological2006" class="csl-entry">
Wicherts, Jelte M., Denny Borsboom, Judith Kats, and Dylan Molenaar. 2006. “The Poor Availability of Psychological Research Data for Reanalysis.” <em>American Psychologist</em> 61 (7): 726–28. <a href="https://doi.org/10.1037/0003-066X.61.7.726" class="external-link uri">https://doi.org/10.1037/0003-066X.61.7.726</a>.
</div>
<div id="ref-WickhamPackagesOrganizeTest2015" class="csl-entry">
Wickham, Hadley. 2015. <em>R Packages: Organize, Test, Document, and Share Your Code</em>. “O’Reilly Media, Inc.”. <a href="http://r-pkgs.had.co.nz/" class="external-link uri">http://r-pkgs.had.co.nz/</a>.
</div>
<div id="ref-wickham_pkgdown:_2017" class="csl-entry">
———. 2017. <em>Pkgdown: Make Static HTML Documentation for a Package</em>. <a href="https://github.com/hadley/pkgdown" class="external-link uri">https://github.com/hadley/pkgdown</a>.
</div>
<div id="ref-wickham_roxygen2:_2017" class="csl-entry">
Wickham, Hadley, Peter Danenberg, and Manuel Eugster. 2017. <em>Roxygen2: In-Line Documentation for R</em>. <a href="https://CRAN.R-project.org/package=roxygen2" class="external-link uri">https://CRAN.R-project.org/package=roxygen2</a>.
</div>
<div id="ref-WilkinsonFAIRGuidingPrinciples2016" class="csl-entry">
Wilkinson, Mark D., Michel Dumontier, IJsbrand Jan Aalbersberg, Gabrielle Appleton, Myles Axton, Arie Baak, Niklas Blomberg, et al. 2016. “The FAIR Guiding Principles for Scientific Data Management and Stewardship.” <em>Scientific Data</em> 3 (March): 160018. <a href="https://doi.org/10.1038/sdata.2016.18" class="external-link uri">https://doi.org/10.1038/sdata.2016.18</a>.
</div>
</div>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="http://github.com/mvuorre/exampleRPackage/" class="external-link">Browse source code</a></li>
<li><a href="http://github.com/mvuorre/exampleRPackage/issues/" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing exampleRPackage</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Matti Vuorre <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-5052-066X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matti Vuorre.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
