<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An example R package • exampleRPackage</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">exampleRPackage</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/Example-Analysis.html">Example Analysis of Example Data</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mvuorre/exampleRPackage/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="examplerpackage" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#examplerpackage" class="anchor"></a>exampleRPackage</h1></div>

<p>This is the Git(Hub) repository of an example R package. In our manuscript (not yet available), we describe why and how researchers might choose to share their research products<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> as R packages. This repository is the example described in the manuscript, and can be viewed online for details of the implementation (that is, the R package’s source code). The exampleRPackage can also be installed from github (although as an example package it does not contain anything useful):</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># install.packages("devtools")</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"mvuorre/exampleRPackage"</span>)</a></code></pre></div>
<p>The file you are reading now is the package’s README, which describes how to create R packages with functions, data, and appropriate documentation. In writing this online tutorial, we relied heavily on Hadley Wickham’s “R Packages”, which is an excellent source of information on creating R packages <span class="citation">(Wickham 2015)</span>.</p>
<hr>
</div>
<div id="motivation" class="section level1">
<h1 class="hasAnchor">
<a href="#motivation" class="anchor"></a>Motivation</h1>
<p>Lack of reproducibility has been identified as a key limiting factor to the reliability of scientific research, and researchers are now urged to focus on factors in their workflow that could improve the reproducibility of their results <span class="citation">(Munaf‘o et al. 2017)</span>.</p>
<blockquote>
<p>“A research project is computationally <em>reproducible</em> if a second investigator (including you in the future) can recreate the final reported results of the project, including key quantitative findings, tables, and figures, given only a set of files and written instructions.” <span class="citation">(Kitzes, Turek, and Deniz 2017)</span></p>
</blockquote>
<p>The role of standards and common practices has always been important in ensuring the continuity of one’s work, especially in areas where results depend on computational work. For example, the BIDS (Brain Imaging Data Structure) has been introduced as a standardized organization for brain imaging to facilitate collaborative work on very large data sets and computationally demanding projects <span class="citation">(Gorgolewski et al. 2016)</span>. However, similar standards have not been established for less computationally intense areas of behavioral science (although there have been some attempts, for example the Tier protocol[^tier]). [^tier]: <a href="http://www.projecttier.org/tier-protocol/specifications/" class="uri">http://www.projecttier.org/tier-protocol/specifications/</a></p>
<div id="why-adopt-a-common-standard" class="section level2">
<h2 class="hasAnchor">
<a href="#why-adopt-a-common-standard" class="anchor"></a>Why adopt a common standard?</h2>
<p>Quoting <span class="citation">Gorgolewski et al. (2016)</span>:</p>
<ul>
<li>Minimized curation: Common standards make it possible for researchers who were not directly involved in data collection to understand and work with the data. This is particularly important to ensure that data remain accessible and usable by different researchers over time in the following instances:
<ul>
<li>within a laboratory over time</li>
<li>between labs facilitating collaboration and making combining data in multi-center studies easier and less ambiguous</li>
<li>between public databases (i.e., OpenfMRI) allowing for the quick ingestion of big data organized according to a common scheme.</li>
</ul>
</li>
<li>Error reduction: Errors attributed to the misunderstanding of the meaning of a given datum (e.g., when variable names are not explicitly stated in the data file and standardized across files).</li>
<li>Optimized usage of data analysis software is made possible when the metadata necessary for analysis (i.e., details of the task or imaging protocol) are easily accessible in a standardized and machine- readable way. This enables the application of completely automated analysis workflows, which greatly enhances reproducibility and efficiency.</li>
<li>Development of automated tools for verifying the consistency and completeness of datasets is realized. Such tools make it easier to spot missing metadata that limit how the data could be analyzed in the future.</li>
</ul>
</div>
<div id="which-standard-to-adopt" class="section level2">
<h2 class="hasAnchor">
<a href="#which-standard-to-adopt" class="anchor"></a>Which standard to adopt?</h2>
<p>Instead of suggesting yet another arbitrary standard, we propose that behavioral scientists could adopt a well-established standard from statistical software development for their project organizing principles. Specifically, in this tutorial we describe how to organize and share one’s data sets, functions, and related materials including analyses, as packages for the R programming language <span class="citation">(R Core Team 2017)</span>.</p>
<p>Why R? R is an easily accessible programming language for statistical computing and graphics, and is rapidly increasing in popularity in the behavioral sciences. For example, the APS Observer recently ran a series of articles promoting R within the psychological science community <span class="citation">(Yee and Debbie 2017)</span>. Importantly, users can create R packages with no or minimal coding, because many of the procedures have been implemented in the RStudio <span class="citation">(RStudio Team 2016)</span> graphical interface.</p>
</div>
</div>
<div id="how-to-create-an-r-package" class="section level1">
<h1 class="hasAnchor">
<a href="#how-to-create-an-r-package" class="anchor"></a>How to Create an R Package</h1>
<p>The outline of the tutorial is as follows:</p>
<ol style="list-style-type: decimal">
<li>
<a href="#create-a-new-r-package-with-r-studio">Create a new R package with R Studio</a>
<ul>
<li>With a few button clicks, this automatically sets up the underlying software infrastructure</li>
</ul>
</li>
<li>
<a href="#describe-the-package">Describe the package</a>
<ul>
<li>DESCRIPTION and README files</li>
</ul>
</li>
<li>
<a href="#add-data">Add data to package</a>
<ul>
<li>Raw data, preprocessing scripts, R data object</li>
</ul>
</li>
<li>
<a href="#create-functions">Create and add functions</a>
<ul>
<li>[todo]</li>
</ul>
</li>
<li>
<a href="#document-the-package">Document the package</a>
<ul>
<li>Describe the package, its functions, and data, in a machine- and human-readable format</li>
</ul>
</li>
</ol>
<p>After these simple steps, you will have a functional R package on your computer. We will also go through advanced (optional) steps.</p>
<ul>
<li>
<a href="#sharing-the-R-package">Sharing the R package</a>
<ul>
<li>Upload it to GitHub so it is easily available to anyone (R user or otherwise)</li>
<li>Mint a DOI for citeability and longevity (todo)</li>
<li>Connect to Open Science Framework (todo)</li>
</ul>
</li>
<li>
<a href="#documenting-analysis-as-package-vignette">Document data analysis as package vignette</a>
<ul>
<li>Creates a readable file showing how to use the package. For example the vignette can describe how the data was (or could be) analyzed</li>
</ul>
</li>
<li>
<a href="#creating-a-website-for-the-data-package">Create a website for the package</a>
<ul>
<li>Showcase your R package online with a website</li>
</ul>
</li>
</ul>
<p>You will need one R package (R developer tools) to follow these instructions:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">"devtools"</span>)</a></code></pre></div>
<p>The <strong>devtools</strong> package <span class="citation">(Wickham and Chang 2017)</span> contains helpful functions for creating R packages.</p>
<div id="create-a-new-r-package-with-r-studio" class="section level2">
<h2 class="hasAnchor">
<a href="#create-a-new-r-package-with-r-studio" class="anchor"></a>Create a new R package with R Studio</h2>
<p>First, use R Studio to create a new R Project. While creating the project, make sure to create the project as an R Package:</p>
<p><img src="README-rstudio-create-project.png"><!-- --></p>
<p>Creating an R (Package) Project with R Studio sets up the necessary infrastructure leaving little work for the user. After creating the package, the project’s files and folders look like this (<code>exampleRPackage</code> is the project’s root folder):</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="ex">exampleRPackage/</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">├── <span class="ex">man/</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="kw">|</span>   └── <span class="ex">hello.Rd</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4">├── <span class="ex">R/</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="kw">|</span>   └── <span class="ex">hello.R</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6">├── <span class="ex">DESCRIPTION</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7">├── <span class="ex">NAMESPACE</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8">├── <span class="ex">exampleRPackage.Rproj</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9">├── <span class="ex">.gitignore</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10">└── <span class="ex">.Rbuildignore</span></a></code></pre></div>
<p><code>man/</code> is the “manuals” folder which will have files documenting the package. <code>R/</code> is a folder for R functions. <code>DESCRIPTION</code> is a file describing the package, and <code>NAMESPACE</code> its functions. <code>exampleRPackage.Rproj</code> identifies the folder as an R package project. <code>.gitignore</code> and <code>.Rbuildignore</code> are hidden files, and specify which files should be ignored by Git <span class="citation">(Vuorre and Curley 2017)</span>, and R package building operations, respectively. These last three files can be ignored for now.</p>
<p>At this point, you can delete <code>man/hello.Rd</code> and <code>R/hello.R</code>. These two files are examples of R function files and R documentation files.</p>
<p>This is already a fully functional R package (but it contains nothing so it’s useless.) We now need to introduce content, and change some of the included files, to turn it into an R package.</p>
</div>
<div id="describe-the-package" class="section level2">
<h2 class="hasAnchor">
<a href="#describe-the-package" class="anchor"></a>Describe the package</h2>
<p>The <code>DESCRIPTION</code> file includes necessary information about the package in standard format. When you create an R package with R Studio, the process automatically creates this file with example content:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="ex">Package</span>: exampleRPackage</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="ex">Type</span>: Package</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="ex">Title</span>: What the Package Does (Title Case)</a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="ex">Version</span>: 0.1.0</a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="ex">Author</span>: Who wrote it</a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="ex">Maintainer</span>: The package maintainer <span class="op">&lt;</span>yourself@somewhere.net<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="ex">Description</span>: More about what it does (maybe more than one line)</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">    <span class="ex">Use</span> four spaces when indenting paragraphs within the Description.</a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="ex">License</span>: What license is it under?</a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="ex">Encoding</span>: UTF-8</a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="ex">LazyData</span>: true</a></code></pre></div>
<p>Modify this file to reflect the details of your package, but make sure you don’t change the formatting: This file is read by the R package creating process, and the file must therefore remain machine-readable. Here’s an example:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="ex">Package</span>: exampleRPackage</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="ex">Type</span>: Package</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="ex">Title</span>: An example R package</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="ex">Version</span>: 0.1.0</a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="ex">Authors@R</span>: person(<span class="st">"Matti"</span>, <span class="st">"Vuorre"</span>, email = <span class="st">"mv2521@columbia.edu"</span>,</a>
<a class="sourceLine" id="cb5-6" data-line-number="6">                  <span class="ex">role</span> = c(<span class="st">"aut"</span>, <span class="st">"cre"</span>))</a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="ex">Maintainer</span>: Matti Vuorre <span class="op">&lt;</span>mv2521@columbia.edu<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="ex">Description</span>: This package is an example R package.</a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="ex">License</span>: What license is it under?</a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="ex">Depends</span>: R (<span class="op">&gt;</span>= 3.1.0)</a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="ex">Encoding</span>: UTF-8</a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="ex">LazyData</span>: true</a></code></pre></div>
<p>The important changes to the above were the package’s name, title, authors, maintainer, description, and depends. Note the odd formatting for the <code>Authors@R</code> field; this ensures that the author’s information is correctly recorded within the package. Then, you can go ahead and delete the <code>NAMESPACE</code> file. To add a license, it is easiest to use a helper function from the devtools package:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">library</span>(devtools)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/infrastructure">use_mit_license</a></span>()</a></code></pre></div>
<p>The above function will automatically add the MIT license file and update the license field in the <code>DESCRIPTION</code> file. Alternatively, you can use the GPL3 license with <code><a href="http://www.rdocumentation.org/packages/devtools/topics/infrastructure">use_gpl3_license()</a></code>. The appropriate licensing of scientific data (and software) is an important topic but outside the scope of this tutorial [todo].</p>
<p>Then, you should add a <code>README</code> file which describes the package in some detail. We recommend writing the file in Markdown<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> or R Markdown <span class="citation">(Allaire et al. 2016)</span>. Here, we choose to create a <code>README.Rmd</code> R Markdown file, which produces a nice looking <code>README.md</code> Markdown file. We use devtools to create a template README.rmd file, which we can then change to suit our needs:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/use_readme_rmd">use_readme_rmd</a></span>()</a></code></pre></div>
<p>You can then write a description of the package (what is it, why does it exist, who created it, who to contact, etc.) Make changes to <code>README.Rmd</code> with R Studio’s text editor. When you are done, click Knit in R Studio.</p>
<p><img src="README-rstudio-knit.png"><!-- --></p>
<p>The package is now described, and includes a readme file that gives additional details about it to other potential users. The first content we add to this example R package is some (simulated) data.</p>
</div>
<div id="add-data" class="section level2">
<h2 class="hasAnchor">
<a href="#add-data" class="anchor"></a>Add data</h2>
<p>First, we will add the raw data to its appropriate location (a <code>data-raw/</code> folder inside the project). You should use this helper function from devtools to create the folder, so that it is also appropriately handled when R builds the package:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/use_data_raw">use_data_raw</a></span>()</a></code></pre></div>
<p>You can then put all the raw data files to <code>data-raw/</code>. For this example R package, we simulated some data, and therefore also put the R script that simulated the data and created the data files in the same folder.</p>
<p>Then, move (or create) any pre-processing scripts or instructions to the same <code>data-raw/</code> folder. Doing so will allow for exact reproduction of the final data set. The pre-processing should output two files: One an easily downloadable .csv file for non-R users, and an R data object for the R package. To create the R data object, include the following at the end of your pre-processing script (or run in the console once you have completed pre-processing):</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/use_data">use_data</a></span>(exampleData)</a></code></pre></div>
<p>The above command assumes that your preprocessing script creates an R data object called exampleData; you can change it to whatever you’d like. The <code><a href="http://www.rdocumentation.org/packages/devtools/topics/use_data">use_data()</a></code> function will save the R data object into <code>data/</code>. This means that your R package now includes a data set called <code>exampleData</code>, which can be easily accessed within R:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">library</span>(exampleRPackage)  <span class="co"># Activate package in current R session</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="kw">head</span>(exampleData)  <span class="co"># Display first 6 rows of example data</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co">#&gt;   group     score</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co">#&gt; 1     a  97.18260</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co">#&gt; 2     a  86.87440</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="co">#&gt; 3     a 107.95184</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">#&gt; 4     a 102.70070</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="co">#&gt; 5     a  97.22694</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="co">#&gt; 6     a  94.33976</span></a></code></pre></div>
<div id="how-to-download-the-raw-data-manually" class="section level3">
<h3 class="hasAnchor">
<a href="#how-to-download-the-raw-data-manually" class="anchor"></a>How to download the raw data manually</h3>
<p>Although it is not part of the formal R package, we stress that the raw data, and possible some form of pre-processed data, should be made available to others in a format that does not require R. We therefore recommend also including the data in some common format, such as comma separated values (<code>.csv</code>), in the <code>data-raw/</code> folder.</p>
<p>For exampleRPackage, you will find all the raw data as .csv files in the <a href="https://github.com/mvuorre/exampleRPackage/tree/master/data-raw"><code>data-raw/</code></a> folder, from where they can be downloaded. That folder also contains full pre-processing instructions in the form of an R script.</p>
</div>
</div>
<div id="document-the-package" class="section level2">
<h2 class="hasAnchor">
<a href="#document-the-package" class="anchor"></a>Document the package</h2>
<p>R users are familiar with reading function documentation by typing <code>?mean</code> in the R console. That function reveals the documentation page for the <code>mean()</code> function. By adding a documentation file, your data object will also have a documentation page, which is easily accessible from within R.</p>
<p>To document your data set, create a file called <code>data.R</code> in the <code>R</code> folder. Then, use R’s (roxygen2 <span class="citation">(Wickham, Danenberg, and Eugster 2017)</span>) documentation syntax to write your data object’s documentation in the <code>R/data.R</code> file. It will look something like the following for our <code>exampleData</code> object:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co">#' Scores of Group A and Group B.</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co">#'</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="co">#' @description A data set with the scores of two groups, Group A and Group B.</span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="co">#'     The data were simulated to illustrate how to create R data packages.</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="co">#'</span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="co">#' @format A data.frame with 60 rows and 2 variables:</span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="co">#' \describe{</span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="co">#'   \item{group}{Participant's group, A or B.}</span></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="co">#'   \item{score}{Participant's score in hypothetical task Z.}</span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="co">#' }</span></a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="co">#' @source \url{https://www.github.com/mvuorre/exampleRPackage}</span></a>
<a class="sourceLine" id="cb11-12" data-line-number="12"><span class="st">"exampleData"</span></a></code></pre></div>
<p>The key features of this documentation file are (from top to bottom in the above code listing):</p>
<p>Each line begins with a <code>#'</code>. The first line is a short description of the data. The <code>@description</code> field is an optional longer description of the data (with indentation if it spans multiple lines). The <code>@format</code> field describes the object’s type (e.g. an R data.frame), its dimensions, and then describes all the variables (e.g. <code>group</code> and <code>score</code>). The <code>@source</code> field includes the source of the data, which could be a citation to an academic article, for example. Finally, the last line should be the name of the data object in quotation marks. You can document multiple data files in the same <code>R/data.R</code> file; simply leave one blank line between them.</p>
<p>Once you are done writing your description, you can use the <code><a href="http://www.rdocumentation.org/packages/devtools/topics/document">document()</a></code> helper function:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/document">document</a></span>()</a></code></pre></div>
<p>This function, from the devtools package, will take what you have written and creates machine-readable files in the <code>man/</code> folder.</p>
<p>Then go to R Studio’s <strong>Build</strong> tab, and click “Build &amp; Reload”. If everything went well, this should build the R package you have just created, and loads it into your current R workspace.</p>
<p>It is important to document data well and precisely so there is never any ambiguity in the meaning of variables, where the data is from, etc. You should therefore spend some time writing documentation files for data objects. Once the package has been built, this documentation (for <code>exampleData</code>) can be viewed in R by calling <code><a href="reference/exampleData.html">?exampleData</a></code>:</p>
<p><img src="README-exampleData-rdocumentation.png"><!-- --></p>
</div>
<div id="create-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#create-functions" class="anchor"></a>Create functions</h2>
<p>[todo]</p>
</div>
</div>
<div id="advanced-optional-steps" class="section level1">
<h1 class="hasAnchor">
<a href="#advanced-optional-steps" class="anchor"></a>Advanced (optional) steps</h1>
<div id="sharing-the-r-package" class="section level2">
<h2 class="hasAnchor">
<a href="#sharing-the-r-package" class="anchor"></a>Sharing the R package</h2>
<p>The easiest way to share the data product is to create the R package as a Git repository (see <a href="https://github.com/mvuorre/reproguide-curate" class="uri">https://github.com/mvuorre/reproguide-curate</a> and <span class="citation">(Vuorre and Curley 2017)</span>) and share it on GitHub. We therefore recommend enabling Git (check the “Create a Git repository” button, Figure @ref(fig:rstudio-create-pkg)) when creating the project. Once the R package’s source code is pushed to GitHub, authorized users (by default, anyone) can browse it on GitHub and manually download any files they’d like (e.g. the raw data files.) Importantly, they can obtain the data with R by installing the R package you have just created:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"mvuorre/exampleRPackage"</span>)</a></code></pre></div>
<p>The above command, when executed in R, downloads and installs the <code>exampleRPackage</code> from GitHub user <code>mvuorre</code>. You can view this example R package’s source code on GitHub: <a href="https://github.com/mvuorre/exampleRPackage" class="uri">https://github.com/mvuorre/exampleRPackage</a>.</p>
</div>
<div id="documenting-analysis-as-package-vignette" class="section level2">
<h2 class="hasAnchor">
<a href="#documenting-analysis-as-package-vignette" class="anchor"></a>Documenting analysis as package vignette</h2>
<p>It is also helpful to share the full analysis code in which the data was used. We recommend writing analyses with R Markdown. R Markdown files can easily be turned into an <em>R package vignette</em>. To initiate a vignette, use</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/infrastructure">use_vignette</a></span>(<span class="st">"Example-Analysis"</span>)</a></code></pre></div>
<p>This creates a vignette template into the <code>vignettes/</code> folder. Write your analysis into the <code>.Rmd</code> file. See <code>vignettes/Example-Analysis.Rmd</code> for an example. Writing your analysis into a vignette ensures that users of the data also have access to the original analysis of the data. Furthermore, vignettes can be built into the package’s website.</p>
</div>
<div id="creating-a-website-for-the-r-package" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-a-website-for-the-r-package" class="anchor"></a>Creating a website for the R package</h2>
<p>[todo pkgdown is currently broken]</p>
<p>You can even create a website for the R package. For this, you need the <a href="https://hadley.github.io/pkgdown/">pkgdown</a> R package <span class="citation">(Wickham 2017)</span>:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co"># install.packages("devtools")</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"hadley/pkgdown"</span>)</a></code></pre></div>
<p>Then, to build your package’s website, you will need to edit the first few lines of the <code>README.Rmd</code> file, from</p>
<pre><code>output:
  md_document:
    variant: markdown_github</code></pre>
<p>to</p>
<pre><code>output: rmarkdown::github_document</code></pre>
<p>We expect that in future releases of devtools will eliminate the need for manually changing this. To create the website, run:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">pkgdown<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/pkgdown/topics/build_site">build_site</a></span>()</a></code></pre></div>
<p>The website is now available at <code>docs/index.html</code>. You can open it and view it locally. However, you will certainly want to upload the website somewhere so that others can access it too.</p>
<p>To make the website available to others, you can host it somewhere in the internet. The easiest option, again, is to host it on GitHub.</p>
<p>Assuming you have created the package in a local Git repository and have synced the repository to GitHub, this is easy. Push all the current changes to GitHub, and then go to the package’s GitHub website, click “Settings”, and scroll down to “GitHub Pages”. There, click on the “Source” pull-down menu that currently says “None”, and choose the “master branch /docs folder”. Save the changes. After a little while, the page will be visible at <a href="https://username.github.io/packagename" class="uri">https://username.github.io/packagename</a>. For example, <code>exampleRPackage</code>’s website is at <a href="https://mvuorre.github.io/exampleRPackage" class="uri">https://mvuorre.github.io/exampleRPackage</a>.</p>
<p>Thank you for reading.</p>
</div>
</div>
<div id="further-reading" class="section level1">
<h1 class="hasAnchor">
<a href="#further-reading" class="anchor"></a>Further Reading</h1>
<div id="online-resources" class="section level2">
<h2 class="hasAnchor">
<a href="#online-resources" class="anchor"></a>Online Resources</h2>
<ul>
<li>
<a href="http://r-pkgs.had.co.nz/" class="uri">http://r-pkgs.had.co.nz/</a>: Website of Hadley Wickham’s R Packages book</li>
<li>
<a href="https://hilaryparker.com/2014/04/29/writing-an-r-package-from-scratch/">Writing an R package from scratch</a>: A short and good blog post on how to create minimal R packages</li>
<li>
<a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html">Writing R Extensions</a>: The official R documentation on writing R packages. This is the complete and definitive set of instructions on how to write R packages. It is almost unreadable in it’s comprehensiveness, and unnecessary for small R packages such as the data package described here.</li>
</ul>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references">
<div id="ref-allaire_rmarkdown:_2016">
<p>Allaire, J. J., Joe Cheng, Yihui Xie, Jonathan McPherson, Winston Chang, Jeff Allen, Hadley Wickham, and Rob Hyndman. 2016. <em>Rmarkdown: Dynamic Documents for R</em> (version 1.3). <a href="https://cran.r-project.org/web/packages/rmarkdown/index.html" class="uri">https://cran.r-project.org/web/packages/rmarkdown/index.html</a>.</p>
</div>
<div id="ref-gorgolewski_brain_2016">
<p>Gorgolewski, Krzysztof J., Tibor Auer, Vince D. Calhoun, R. Cameron Craddock, Samir Das, Eugene P. Duff, Guillaume Flandin, et al. 2016. “The Brain Imaging Data Structure, a Format for Organizing and Describing Outputs of Neuroimaging Experiments.” <em>Scientific Data</em> 3 (June):160044. <a href="https://doi.org/10.1038/sdata.2016.44" class="uri">https://doi.org/10.1038/sdata.2016.44</a>.</p>
</div>
<div id="ref-KitzesPracticeReproducibleResearch2017">
<p>Kitzes, Justin, Daniel Turek, and Fatma Deniz. 2017. <em>The Practice of Reproducible Research: Case Studies and Lessons from the Data-Intensive Sciences</em>. University of California Press. <a href="https://www.practicereproducibleresearch.org/" class="uri">https://www.practicereproducibleresearch.org/</a>.</p>
</div>
<div id="ref-Munafomanifestoreproduciblescience2017">
<p>Munaf‘o, Marcus R., Brian A. Nosek, Dorothy V. M. Bishop, Katherine S. Button, Christopher D. Chambers, Nathalie Percie du Sert, Uri Simonsohn, Eric-Jan Wagenmakers, Jennifer J. Ware, and John P. A. Ioannidis. 2017. “A Manifesto for Reproducible Science.” <em>Nature Human Behaviour</em> 1 (January):0021. <a href="https://doi.org/10.1038/s41562-016-0021" class="uri">https://doi.org/10.1038/s41562-016-0021</a>.</p>
</div>
<div id="ref-RCoreTeamLanguageEnvironmentStatistical2017">
<p>R Core Team. 2017. <em>R: A Language and Environment for Statistical Computing</em>. Vienna, Austria: R Foundation for Statistical Computing. <a href="https://www.R-project.org/" class="uri">https://www.R-project.org/</a>.</p>
</div>
<div id="ref-RStudioTeamRStudioIntegratedDevelopment2016">
<p>RStudio Team. 2016. <em>RStudio: Integrated Development Environment for R</em>. Boston, MA: RStudio, Inc. <a href="http://www.rstudio.com/" class="uri">http://www.rstudio.com/</a>.</p>
</div>
<div id="ref-vuorre_curating_2017">
<p>Vuorre, Matti, and James P. Curley. 2017. “Curating Research Assets in Behavioral Sciences: A Tutorial on the Git Version Control System.” <em>PsyArXiv Preprints</em>, June. <a href="https://doi.org/10.17605/OSF.IO/TXGN8" class="uri">https://doi.org/10.17605/OSF.IO/TXGN8</a>.</p>
</div>
<div id="ref-wickham_r_2015">
<p>Wickham, Hadley. 2015. <em>R Packages: Organize, Test, Document, and Share Your Code</em>. "O’Reilly Media, Inc.". <a href="http://r-pkgs.had.co.nz/" class="uri">http://r-pkgs.had.co.nz/</a>.</p>
</div>
<div id="ref-wickham_pkgdown:_2017">
<p>———. 2017. <em>Pkgdown: Make Static HTML Documentation for a Package</em>. <a href="https://github.com/hadley/pkgdown" class="uri">https://github.com/hadley/pkgdown</a>.</p>
</div>
<div id="ref-wickham_devtools:_2017">
<p>Wickham, Hadley, and Winston Chang. 2017. <em>Devtools: Tools to Make Developing R Packages Easier</em>. <a href="https://CRAN.R-project.org/package=devtools" class="uri">https://CRAN.R-project.org/package=devtools</a>.</p>
</div>
<div id="ref-wickham_roxygen2:_2017">
<p>Wickham, Hadley, Peter Danenberg, and Manuel Eugster. 2017. <em>Roxygen2: In-Line Documentation for R</em>. <a href="https://CRAN.R-project.org/package=roxygen2" class="uri">https://CRAN.R-project.org/package=roxygen2</a>.</p>
</div>
<div id="ref-yee_why_2017">
<p>Yee, Sara J. Weston, and Debbie. 2017. “Why You Should Become a UseR: A Brief Introduction to R.” <em>APS Observer</em> 30 (3). <a href="https://www.psychologicalscience.org/observer/why-you-should-become-a-user-a-brief-introduction-to-r" class="uri">https://www.psychologicalscience.org/observer/why-you-should-become-a-user-a-brief-introduction-to-r</a>.</p>
</div>
</div>
</div>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>By “product”, we mean any combination of text (manuscripts), code, data, stimuli, and other research materials.<a href="#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p><a href="https://daringfireball.net/projects/markdown/" class="uri">https://daringfireball.net/projects/markdown/</a><a href="#fnref2" class="footnote-back">↩</a></p></li>
</ol>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2 class="hasAnchor">
<a href="#sidebar" class="anchor"></a>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/mvuorre/exampleRPackage/">https://​github.com/​mvuorre/​exampleRPackage/​</a>
</li>
<li>Report a bug at <br><a href="http://github.com/mvuorre/exampleRPackage/issues/">http://​github.com/​mvuorre/​exampleRPackage/​issues/​</a>
</li>
</ul>
<h2>License</h2>
<p><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE.html">LICENSE</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Matti Vuorre <br><small class="roles"> Author, maintainer </small> </li>
</ul>
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/mvuorre/exampleRPackage">available on GitHub</a></li>
</ul>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Matti Vuorre.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
